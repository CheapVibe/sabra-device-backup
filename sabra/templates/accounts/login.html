{% extends 'base_auth.html' %}

{% block title %}Sign In - Sabra Device Backup{% endblock %}

{% block auth_content %}
<div class="text-center">
    <div class="brand-logo">
        <i class="bi bi-hdd-network"></i>
    </div>
    <h1 class="auth-title h3">Sabra Device Backup</h1>
    <p class="auth-subtitle">Sign in to your account</p>
</div>

<div class="card">
    <div class="card-body">
        {% if request.GET.next %}
        <div class="session-expired-notice">
            <i class="bi bi-info-circle me-1"></i>
            Please sign in to continue.
        </div>
        {% endif %}
        
        {% if request.GET.logged_out %}
        <div class="alert alert-success">
            <i class="bi bi-check-circle me-1"></i>
            You have been logged out successfully.
        </div>
        {% endif %}
        
        <form method="post" novalidate>
            {% csrf_token %}
            
            {% if form.errors %}
            <div class="alert alert-danger">
                <i class="bi bi-exclamation-triangle me-1"></i>
                Invalid username or password. Please try again.
            </div>
            {% endif %}
            
            <div class="mb-3">
                <label for="id_username" class="form-label fw-medium">Username</label>
                <div class="input-group">
                    <span class="input-group-text bg-light border-end-0">
                        <i class="bi bi-person text-muted"></i>
                    </span>
                    <input type="text" 
                           name="username" 
                           class="form-control border-start-0 ps-0{% if form.errors %} is-invalid{% endif %}" 
                           id="id_username" 
                           placeholder="admin" 
                           value="{{ form.username.value|default:'' }}"
                           autocomplete="username"
                           required 
                           autofocus>
                </div>
            </div>
            
            <div class="mb-3">
                <label for="id_password" class="form-label fw-medium">Password</label>
                <div class="input-group">
                    <span class="input-group-text bg-light border-end-0">
                        <i class="bi bi-lock text-muted"></i>
                    </span>
                    <input type="password" 
                           name="password" 
                           class="form-control border-start-0 ps-0{% if form.errors %} is-invalid{% endif %}" 
                           id="id_password"
                           autocomplete="current-password"
                           required>
                </div>
            </div>
            
            <div class="mb-4 form-check">
                <input type="checkbox" name="remember_me" class="form-check-input" id="remember_me">
                <label class="form-check-label text-muted" for="remember_me">
                    Keep me signed in
                </label>
            </div>
            
            {% if form.non_field_errors %}
            {% for error in form.non_field_errors %}
            <div class="alert alert-danger small">{{ error }}</div>
            {% endfor %}
            {% endif %}
            
            <button type="submit" class="btn btn-primary w-100">
                <i class="bi bi-box-arrow-in-right me-2"></i>
                Sign In
            </button>
        </form>
    </div>
</div>
{% endblock %}
